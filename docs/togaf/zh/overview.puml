@startuml 总体架构概览图
!theme plain
skinparam componentStyle rectangle
skinparam linetype ortho

title TOGAF 总体架构概览图 - Single-SPA 四层架构关系

' 业务架构层
package "业务架构层 (Business Architecture)" {
  component [业务目标] as BizGoal
  component [业务流程] as BizProcess
  component [业务能力] as BizCapability
  component [业务服务] as BizService
  component [利益相关者] as Stakeholders
}

' 应用架构层
package "应用架构层 (Application Architecture)" {
  component [应用接口] as AppInterface
  component [核心应用模块] as CoreApp
  component [生命周期管理] as LifecycleMgr
  component [状态管理] as StateMgr
  component [功能扩展] as FeatureExt
  component [工具支撑] as Utilities
}

' 数据架构层
package "数据架构层 (Data Architecture)" {
  component [应用状态模型] as StateModel
  component [应用数据对象] as AppData
  component [事件数据] as EventData
  component [数据存储] as DataStore
  component [数据流转] as DataFlow
}

' 技术架构层
package "技术架构层 (Technology Architecture)" {
  component [运行时环境] as RuntimeEnv
  component [编程语言] as Language
  component [核心框架] as CoreFramework
  component [构建工具] as BuildTools
  component [开发工具] as DevTools
  component [浏览器兼容] as BrowserCompat
}

' 跨层关系：业务到应用
BizService --> AppInterface : 通过API实现
BizCapability --> CoreApp : 映射到应用模块
BizProcess --> LifecycleMgr : 依赖生命周期
BizProcess --> StateMgr : 需要状态管理

' 跨层关系：应用到数据
AppInterface --> AppData : 操作
CoreApp --> StateModel : 管理状态
LifecycleMgr --> AppData : 处理数据
StateMgr --> DataStore : 存储数据
FeatureExt --> EventData : 产生事件

' 跨层关系：数据到技术
StateModel --> Language : 使用语言特性
AppData --> RuntimeEnv : 在运行时执行
DataStore --> RuntimeEnv : 存储在运行时
DataFlow --> RuntimeEnv : 在运行时流转

' 跨层关系：应用到技术
CoreApp --> CoreFramework : 实现
AppInterface --> Language : 使用语言定义
LifecycleMgr --> RuntimeEnv : 依赖运行时
StateMgr --> RuntimeEnv : 依赖运行时
Utilities --> BuildTools : 通过工具构建

' 跨层关系：业务到技术
BizService --> CoreFramework : 通过框架提供
BizCapability --> RuntimeEnv : 在运行时实现
BizProcess --> BuildTools : 通过构建部署

' 跨层关系：业务到数据
BizProcess --> StateModel : 产生状态变化
BizService --> DataFlow : 触发数据流转
Stakeholders --> DataStore : 访问数据

' 架构原则标注
note top of BizGoal
  TOGAF业务架构原则：
  - 业务驱动技术决策
  - 关注业务价值交付
  - 支持业务能力演进
end note

note right of CoreApp
  TOGAF应用架构原则：
  - 模块化和可复用
  - 清晰的接口定义
  - 松耦合高内聚
end note

note bottom of StateModel
  TOGAF数据架构原则：
  - 数据一致性保证
  - 清晰的状态管理
  - 可追溯的数据流转
end note

note left of CoreFramework
  TOGAF技术架构原则：
  - 技术标准化
  - 平台可移植性
  - 构建和部署自动化
end note

' 架构层次说明
package "架构层次说明" {
  component [层次1: 业务架构] as Layer1
  component [层次2: 应用架构] as Layer2
  component [层次3: 数据架构] as Layer3
  component [层次4: 技术架构] as Layer4
}

note right of Layer1
  描述业务目标、流程和能力
  关注业务价值和利益相关者需求
end note

note right of Layer2
  描述应用组件和模块结构
  关注应用功能和接口设计
end note

note right of Layer3
  描述数据模型和状态管理
  关注数据流转和存储
end note

note right of Layer4
  描述技术栈和工具链
  关注实现技术和部署环境
end note

' 架构关系矩阵
component [架构关系矩阵] as RelationshipMatrix

note right of RelationshipMatrix
  - 实现关系: 业务 → 应用 → 技术
  - 依赖关系: 应用 → 数据 → 技术
  - 映射关系: 业务能力 → 应用功能
  - 支撑关系: 技术 → 数据 → 应用 → 业务
end note

@enduml
